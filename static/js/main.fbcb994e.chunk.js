(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{105:function(e,t,n){e.exports={messages__item:"MessageItem_messages__item__1jEjC",ava:"MessageItem_ava__2TnzV",name:"MessageItem_name__1KLyk",message:"MessageItem_message__1tqb-"}},106:function(e,t,n){e.exports={posts:"MyPosts_posts__8f4w-",posts__item:"MyPosts_posts__item__g4DML",head:"MyPosts_head__3DANC",button:"MyPosts_button__36rP7"}},107:function(e,t,n){e.exports={logo:"Header_logo__3zA2i",userPhoto:"Header_userPhoto__3iuyi"}},119:function(e,t,n){e.exports={ava:"DialogItem_ava__1acBe",dialog:"DialogItem_dialog__2zJqv",active:"DialogItem_active__1cWe0",span:"DialogItem_span__31oAt"}},172:function(e,t,n){e.exports={container:"container_container__2UIPF"}},173:function(e,t,n){e.exports={item:"Post_item__HzeD4"}},223:function(e,t,n){},227:function(e,t,n){},347:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),s=n.n(a),c=(n(223),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,355)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))}),i=n(27),o=n.n(i),u=n(28),l=(n(227),function(){return Object(r.jsx)("div",{children:"Settings"})}),j=n(12),d=n(6),b=n(76),m=n(8),O=function(e){return{isAuth:e.auth.isAuth}};var p,f=function(e){return Object(m.b)(O)((function(t){var n=t.isAuth,a=Object(b.a)(t,["isAuth"]);return n?Object(r.jsx)(e,Object(d.a)({},a)):Object(r.jsx)(j.a,{to:"/login"})}))},h=n(42),g=n(77),x=n.n(g),_=n(119),v=n.n(_),S=function(e){var t="/dialogs/"+e.id;return Object(r.jsx)(u.c,{to:t,activeClassName:v.a.active,children:Object(r.jsx)("div",{className:v.a.dialog,children:Object(r.jsx)("span",{children:e.name})})})},E=n(105),w=n.n(E),y=function(e){return Object(r.jsxs)("li",{className:w.a.messages__item,children:[Object(r.jsx)("span",{className:w.a.name,children:e.id}),Object(r.jsx)("span",{className:w.a.message,children:e.message})]})},N=n(30),T=n(26),I=n(37),k=n(351),P=n(350),C=k.a.TextArea,F=function(e){var t=e.label,n=Object(b.a)(e,["label"]),a=Object(I.b)(n),s=Object(T.a)(a,2),c=s[0],i=s[1];return Object(r.jsxs)(r.Fragment,{children:[t&&Object(r.jsx)("label",{htmlFor:n.id||n.name,children:t}),Object(r.jsx)(k.a,Object(d.a)(Object(d.a)({style:n.style},c),{},{placeholder:n.placeholder,type:n.type})),i.touched&&i.error?Object(r.jsx)("div",{className:"error",children:i.error}):null]})},A=function(e){var t=e.label,n=Object(b.a)(e,["label"]),a=Object(I.b)(n),s=Object(T.a)(a,2),c=s[0],i=s[1];return Object(r.jsxs)(r.Fragment,{children:[t&&Object(r.jsx)("label",{htmlFor:n.id||n.name,children:t}),Object(r.jsx)(C,Object(d.a)(Object(d.a)({style:n.style},c),{},{placeholder:n.placeholder})),i.touched&&i.error?Object(r.jsx)("div",{className:"error",children:i.error}):null]})},D=function(e){var t=e.children,n=Object(b.a)(e,["children"]),a=Object(I.b)(Object(d.a)(Object(d.a)({},n),{},{type:"checkbox"})),s=Object(T.a)(a,2),c=s[0],i=s[1];return Object(r.jsxs)(r.Fragment,{children:[t,Object(r.jsx)(P.a,Object(d.a)({checked:c.checked},c)),i.touched&&i.error?Object(r.jsx)("div",{className:"error",children:i.error}):null]})},U=s.a.memo((function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.dialogsPage})),n=t.dialogs,a=t.messages;return Object(r.jsxs)("div",{className:x.a.dialogs,children:[Object(r.jsx)("div",{className:x.a.dialogs__items,children:n.map((function(e){return Object(r.jsx)(S,{name:e.name,id:e.id},e.id)}))}),Object(r.jsxs)("div",{className:x.a.messages,children:[a.map((function(e){return Object(r.jsx)(y,{id:e.id,message:e.message},e.id)})),Object(r.jsx)(I.a,{initialValues:{messageText:""},validationSchema:N.a({messageText:N.b().max(100,"Must be 100 characters or less").required("Required")}),onSubmit:function(t,n){var r;r=t.messageText,e({type:"ADD-MESSAGE",newText:r}),n.resetForm()},children:function(e){return Object(r.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(r.jsx)(F,{className:x.a.input,name:"messageText",id:"messageText",placeholder:"Enter your message"}),Object(r.jsx)("button",{className:x.a.butt,type:"submit",children:"Submit"})]})}})]})]})})),L=Object(h.d)(f)(U),R=n(88),M=n.n(R),B=s.a.memo((function(e){for(var t=e.pageSize,n=e.totalItemsCount,s=e.onChangePage,c=e.currentPage,i=e.portionSize,o=void 0===i?10:i,u=Math.ceil(n/t),l=[],j=1;j<=u;j++)l.push(j);var d=Math.ceil(u/o),b=Object(a.useState)(1),m=Object(T.a)(b,2),O=m[0],p=m[1],f=(O-1)*o+1,h=O*o;return Object(r.jsxs)("div",{className:M.a.paginatorBlock,children:[O>1&&Object(r.jsx)("button",{onClick:function(){return p(O-1)},children:"Prev"}),Object(r.jsx)("div",{className:M.a.portionBlock,children:l.filter((function(e){return e>=f&&e<=h})).map((function(e){var t="".concat(M.a.pageNumber," ").concat(c===e?M.a.pageNumberActive:"");return Object(r.jsx)("span",{onClick:function(){return s(e)},className:t,children:e},e)}))}),d>O&&Object(r.jsx)("button",{onClick:function(){return p(O+1)},children:"Next"})]})})),H=n(43),G=n.n(H),q=n.p+"static/media/user.81251c2b.png",J=function(e){var t=e.us,n=e.onUnFollowHandler,a=e.onFollowHandler,s=e.followingInProgress;return Object(r.jsxs)("div",{className:G.a.user,children:[Object(r.jsxs)("div",{className:G.a.userIconBlock,children:[Object(r.jsx)(u.c,{to:"/profile/".concat(t.id),children:Object(r.jsx)("img",{className:G.a.photo,src:null!==t.photos.small?t.photos.small:q,alt:"dsg"})}),t.followed?Object(r.jsx)("button",{disabled:s.some((function(e){return e===t.id})),onClick:n,children:"Unfollow"}):Object(r.jsx)("button",{disabled:s.some((function(e){return e===t.id})),onClick:a,children:"Follow"})]}),Object(r.jsx)("div",{className:G.a.userDescriptionBlock,children:Object(r.jsxs)("div",{className:G.a.userDescriptionInfo,children:[Object(r.jsx)("span",{children:t.name}),Object(r.jsx)("span",{children:t.status})]})})]},t.id)},W=n(10),z=n.n(W),V=n(20),K=n(24),Z=function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(d.a)(Object(d.a)({},e),r):e}))};!function(e){e.SET_IS_FETCHING="SET_IS_FETCHING",e.SET_USERS_COUNT="SET_USERS_COUNT",e.SET_CURRENT_PAGE="SET_CURRENT_PAGE",e.SET_USERS="SET_USERS",e.UNFOLLOW="UNFOLLOW",e.FOLLOW="FOLLOW",e.FOLLOWING_IN_PROGRESS="FOLLOWING_IN_PROGRESS"}(p||(p={}));var X,Y={users:[],pageSize:10,totalUsersCount:23,isFetching:!0,currentPage:1,followingInProgress:[]},Q=n(171),$=n.n(Q).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"0c7f7a4d-ffbe-4143-a04f-3a08c1c80984"}}),ee=function(e,t){return $.get("users?page=".concat(t,"&count=").concat(e)).then((function(e){return e.data}))},te=function(e,t){return $.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},ne=function(e){return $.get("profile/"+e).then((function(e){return e}))},re=function(e){return $.get("profile/status/".concat(e)).then((function(e){return e}))},ae=function(e){return $.put("profile/status",{status:e})},se=function(e){var t=new FormData;return t.append("image",e),$.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},ce=function(e){return $.put("profile",e)},ie=function(){return $.get("auth/me").then((function(e){return e.data}))},oe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return $.post("auth/login",{email:e,password:t,rememberMe:n,captcha:r}).then((function(e){return e.data}))},ue=function(){return $.delete("auth/login")},le=function(){return $.get("security/get-captcha-url").then((function(e){return e}))},je=function(e){return{type:p.FOLLOW,userId:e}},de=function(e){return{type:p.UNFOLLOW,userId:e}},be=function(e){return{type:p.SET_USERS,users:e}},me=function(e){return{type:p.SET_CURRENT_PAGE,currentPage:e}},Oe=function(e){return{type:p.SET_IS_FETCHING,isFetching:e}},pe=n(172),fe=n.n(pe),he=s.a.memo((function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.usersPage})),n=t.currentPage,s=t.totalUsersCount,c=t.pageSize,i=t.users,o=t.followingInProgress,u=Object(a.useCallback)((function(t){e(function(e,t){return function(){var n=Object(V.a)(z.a.mark((function n(r){var a;return z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(me(e)),r(Oe(!0)),n.next=4,te(e,t);case 4:a=n.sent,r(Oe(!1)),r(be(a.items));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,c))}),[e,c]),l=Object(a.useCallback)((function(t){return e(je(t))}),[e]),j=Object(a.useCallback)((function(t){return e(de(t))}),[e]),d="".concat(fe.a.container," ").concat(G.a.container);return Object(r.jsx)("div",{className:G.a.usersBlock,children:Object(r.jsxs)("div",{className:d,children:[Object(r.jsx)(B,{pageSize:c,totalItemsCount:s,currentPage:n,onChangePage:u}),i.map((function(e){return Object(r.jsx)(J,{followingInProgress:o,onUnFollowHandler:function(){return j(e.id)},onFollowHandler:function(){return l(e.id)},us:e},"".concat(e.id," ").concat(e.name))}))]})})})),ge=n.p+"static/media/three-dots.f2671151.svg",xe=function(){return Object(r.jsx)("div",{className:G.a.imgLoad,children:Object(r.jsx)("img",{alt:"loading",src:ge})})},_e=function(){var e=Object(m.d)((function(e){return e.usersPage})),t=e.isFetching,n=e.pageSize,s=e.currentPage,c=Object(m.c)();return Object(a.useEffect)((function(){c(function(e,t){return function(){var n=Object(V.a)(z.a.mark((function n(r){var a;return z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(Oe(!0)),r(me(e)),n.next=4,ee(e,t);case 4:a=n.sent,r(Oe(!1)),r(be(a.items)),r((s=a.totalCount,{type:p.SET_USERS_COUNT,usersCount:s}));case 8:case"end":return n.stop()}var s}),n)})));return function(e){return n.apply(this,arguments)}}()}(n,s))}),[]),Object(r.jsxs)(r.Fragment,{children:[t?Object(r.jsx)(xe,{}):null,Object(r.jsx)(he,{})]})},ve=n(83),Se=function(e){return{type:"SET_USER_STATUS",status:e}},Ee=function(e){return function(){var t=Object(V.a)(z.a.mark((function t(n){var r,a;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ne(e);case 2:r=t.sent,a=r.data,n({type:"SET_USER_PROFILE",profile:a});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},we=function(e){return function(){var t=Object(V.a)(z.a.mark((function t(n,r){var a,s,c;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r().auth.userId,t.next=3,ce(e);case 3:if(s=t.sent,0!==(c=s.data).resultCode){t.next=9;break}null!==a&&n(Ee(a)),t.next=11;break;case 9:return n(Object(ve.a)("edit-profile",{_error:c.messages[0]})),t.abrupt("return",Promise.reject(c.messages[0]));case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},ye=n(59),Ne=n.n(ye),Te=n.p+"static/media/new-user.a785bc1b.png",Ie=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.profilePage})).status,n=Object(a.useState)(t),s=Object(T.a)(n,2),c=s[0],i=s[1],o=Object(a.useState)(!1),u=Object(T.a)(o,2),l=u[0],j=u[1],d=function(){j(!1),e(function(e){return function(){var t=Object(V.a)(z.a.mark((function t(n){return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ae(e);case 3:0===t.sent.data.resulCode&&n(Se(e)),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(c))};return Object(a.useEffect)((function(){i(t)}),[t]),Object(r.jsx)(r.Fragment,{children:l?Object(r.jsx)("input",{onKeyPress:function(e){13===e.charCode&&d()},value:c,onChange:function(e){i(e.currentTarget.value)},autoFocus:!0,onBlur:d,className:Ne.a.editableInput,type:"text"}):Object(r.jsx)("span",{onDoubleClick:function(){return j(!0)},className:Ne.a.editableSpan,children:c||"-------"})})},ke=n(75),Pe=function(e){var t=e.profile,n=e.isOwner,a=e.activeEditMode;return Object(r.jsxs)("div",{className:Ne.a.description,children:[Object(r.jsxs)("div",{className:Ne.a.name,children:[Object(r.jsx)("h2",{children:t.fullName}),Object(r.jsx)(Ie,{})]}),n&&Object(r.jsx)(ke.a,{onClick:a,children:"Edit"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("span",{children:"About me:"})," ",t.aboutMe]}),Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("span",{children:"looking for a job:"})," ",t.lookingForAJob?"yes":"no"]}),t.lookingForAJob&&Object(r.jsxs)("div",{children:[Object(r.jsx)("span",{children:"looking for a job:"})," ",t.lookingForAJobDescription]})]})]})},Ce=function(e){var t=e.onSubmit,n=e.profile;return Object(r.jsx)(I.a,{initialValues:{fullName:n.fullName,aboutMe:n.aboutMe,lookingForAJobDescription:n.lookingForAJobDescription,lookingForAJob:n.lookingForAJob},validationSchema:N.a({fullName:N.b().max(25,"Must be 25 characters or less").required("Required"),aboutMe:N.b().max(95,"Must be 95 characters or less").required("Required"),lookingForAJobDescription:N.b().max(85,"Must be 85 characters or less").required("Required")}),onSubmit:function(e){t(e)},children:function(e){return Object(r.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(r.jsx)(F,{label:"Full name: ",name:"fullName",id:"fullName",placeholder:"Enter your name"}),Object(r.jsx)(F,{label:"About me: ",name:"aboutMe",id:"aboutMe"}),Object(r.jsx)(F,{label:"My professional skills: ",name:"lookingForAJobDescription",id:"lookingForAJobDescription"}),Object(r.jsx)("div",{children:Object(r.jsx)(D,{id:"lookingForAJob",name:"lookingForAJob",children:"looking for a job: "})}),Object(r.jsx)(ke.a,{htmlType:"submit",children:"Submit"})]})}})},Fe=n(353),Ae=n(354),De=s.a.memo((function(e){var t=e.profile,n=e.isOwner,s=Object(m.c)(),c=Object(a.useState)(!1),i=Object(T.a)(c,2),o=i[0],u=i[1],l=t.photos.large||Te,j=function(){var e=Object(V.a)(z.a.mark((function e(t){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s(we(t));case 3:e.sent||u(!1),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)(Fe.a,{children:[Object(r.jsxs)(Ae.a,{span:10,children:[Object(r.jsx)("img",{className:Ne.a.ava,src:l,alt:"userPhoto"}),n&&Object(r.jsx)("input",{type:"file",onChange:function(e){var t;e.target.files.length&&s((t=e.target.files[0],function(){var e=Object(V.a)(z.a.mark((function e(n){var r,a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(t);case 2:r=e.sent,0===(a=r.data).resultCode&&n({type:"SET_PHOTO",photo:a.data.photos});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}})]}),Object(r.jsx)(Ae.a,{span:12,children:o?Object(r.jsx)(Ce,{profile:t,onSubmit:j}):Object(r.jsx)(Pe,{isOwner:n,activeEditMode:function(){return u(!0)},profile:t})})]})})),Ue=n(173),Le=n.n(Ue),Re=function(e){return Object(r.jsxs)("div",{className:Le.a.item,children:[Object(r.jsx)("img",{src:"https://northlands.ru/data/media/14/50930ef9c06c1b4f1a3619eaf0b56a96.jpg",alt:""}),e.message,Object(r.jsxs)("div",{children:[e.likesCount," likes"]})]},e.id)},Me=n(106),Be=n.n(Me),He=s.a.memo((function(e){var t=Object(m.c)(),n=Object(m.d)((function(e){return e.profilePage})).posts;return Object(r.jsxs)("div",{className:Be.a.posts,children:[Object(r.jsx)("h2",{className:Be.a.head,children:"My post"}),Object(r.jsx)(I.a,{initialValues:{text:""},validationSchema:N.a({text:N.b().max(195,"Must be 195 characters or less").required("Required")}),onSubmit:function(e,n){var r;r=e.text,t({type:"ADD-POST",newText:r}),n.resetForm()},children:function(e){return Object(r.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(r.jsx)(A,{style:{width:"400px",resize:"none",marginBottom:10},name:"text",id:"text",placeholder:"What is new?"}),Object(r.jsx)(ke.a,{htmlType:"submit",children:"Send"})]})}}),Object(r.jsx)("div",{className:Be.a.posts__item,children:n.map((function(e){return Object(r.jsx)(Re,{id:e.id,message:e.message,likesCount:e.likesCount},e.id)}))})]})})),Ge=n(51),qe=Object(h.d)(j.f,f)((function(e){var t=Object(m.c)(),n=Object(m.d)((function(e){return e.profilePage})).profile,s=Object(m.d)((function(e){return e.auth})).userId;return Object(a.useEffect)((function(){var n=e.match.params.userId;n||(n=s)||e.history.push("/login"),t(Ee(n)),t(function(e){return function(){var t=Object(V.a)(z.a.mark((function t(n){var r,a;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,re(e);case 2:r=t.sent,a=r.data,n(Se(a));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(n))}),[e.match.params.userId,e.history,s,t]),n?Object(r.jsxs)(Ge.a,{children:[Object(r.jsx)(De,{profile:n,isOwner:!e.match.params.userId}),Object(r.jsx)(He,{})]}):Object(r.jsx)(xe,{})})),Je=n(78),We=n.n(Je),ze=function(e,t,n,r){return{type:"SET_USER_DATA",data:{userId:e,email:t,login:n,isAuth:r}}},Ve=function(){return function(){var e=Object(V.a)(z.a.mark((function e(t){var n,r,a,s,c,i,o;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie();case 2:if(0!==(n=e.sent).resultCode){e.next=11;break}return r=n.data,a=r.id,s=r.login,c=r.email,t(ze(a,c,s,!0)),e.next=8,ne(a);case 8:i=e.sent,o=i.data,t({type:"SET_USER_PHOTO",photo:o.photos.small});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ke=function(){return function(){var e=Object(V.a)(z.a.mark((function e(t){var n,r;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le();case 2:n=e.sent,r=n.data,t({type:"SET_CAPTCHA",captchaUrl:r.url});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ze=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.auth})),n=t.isAuth,a=t.captcha,s=function(t){e(function(e,t,n,r){return function(){var a=Object(V.a)(z.a.mark((function a(s){var c,i;return z.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,oe(e,t,n,r);case 2:0===(c=a.sent).resultCode?s(Ve()):(10===c.resultCode&&s(Ke()),i=c.messages.length>0?c.messages[0]:"Some error",s(Object(ve.a)("login",{_error:i})));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(t.email,t.password,t.rememberMe,t.captcha))};return n?Object(r.jsx)(j.a,{to:"/profile"}):Object(r.jsx)("div",{children:Object(r.jsx)(I.a,{initialValues:{email:"",password:"",rememberMe:!1,captcha:""},validationSchema:N.a({email:N.b().max(25,"Must be 25 characters or less").required("Required").email(),password:N.b().max(25,"Must be 95 characters or less").required("Required")}),onSubmit:function(e){s(e)},children:function(e){return Object(r.jsxs)("form",{className:We.a.form,onSubmit:e.handleSubmit,children:[Object(r.jsx)(F,{className:We.a.input,label:"Email: ",name:"email",id:"email",placeholder:"Enter your email"}),Object(r.jsx)(F,{className:We.a.input,label:"Password: ",type:"password",name:"password",id:"password"}),Object(r.jsxs)("div",{className:We.a.rememberBlock,children:[Object(r.jsx)("span",{children:"Remember me"}),Object(r.jsx)(D,{id:"rememberMe",name:"rememberMe"})]}),a&&Object(r.jsx)("img",{src:a,alt:"captcha"}),a&&Object(r.jsx)(F,{className:We.a.input,label:"Enter symbols from image: ",name:"captcha",id:"captcha"}),Object(r.jsx)("button",{type:"submit",children:"Login"})]})}})})};!function(e){e.SET_INITIALIZED="SET_INITIALIZED"}(X||(X={}));var Xe={initialized:!1},Ye=function(){return function(e){var t=e(Ve());Promise.all([t]).then((function(){e({type:X.SET_INITIALIZED})}))}},Qe=n(349),$e=n(352),et=n(124),tt=n(107),nt=n.n(tt),rt=Qe.a.Header,at=Object(j.f)((function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.auth})),n=t.isAuth,a=t.photo,s={display:"flex",justifyContent:"center",alignItems:"center"};return Object(r.jsx)(rt,{className:"header",children:Object(r.jsxs)(Fe.a,{children:[Object(r.jsx)(Ae.a,{span:20,children:Object(r.jsx)("div",{style:s,className:nt.a.logo,children:Object(r.jsx)(u.b,{to:"/profile",className:nt.a.a,children:Object(r.jsx)("img",{src:"https://www.amic.ru/project/all/architecture-barnaul/images/tild3630-6134-4437-b138-623638326363__medicallogopng32.jpeg",alt:"logo"})})})}),n?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Ae.a,{style:s,xs:2,children:Object(r.jsx)("img",{className:nt.a.userPhoto,src:null!==a?a:q,alt:"userPhoto"})}),Object(r.jsx)(Ae.a,{style:s,span:2,children:Object(r.jsx)(ke.a,{onClick:function(){e(function(){var e=Object(V.a)(z.a.mark((function e(t){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue();case 2:0===e.sent.data.resultCode&&t(ze(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Log out"})})]}):Object(r.jsx)(Ae.a,{style:s,span:4,children:Object(r.jsx)(ke.a,{children:Object(r.jsx)(u.b,{to:"/login",children:"Login"})})})]})})})),st=Qe.a.Content,ct=Qe.a.Sider,it=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.appPage.initialized})),n=function(e){e.reason?alert(e.reason):alert("some error occurred")};return Object(a.useEffect)((function(){return e(Ye()),window.addEventListener("unhandledrejection",n),function(){window.removeEventListener("unhandledrejection",n)}}),[e]),t?Object(r.jsxs)(Qe.a,{children:[Object(r.jsx)(at,{}),Object(r.jsxs)(st,{style:{width:1200,margin:"0 auto"},children:[Object(r.jsx)($e.a,{style:{margin:"16px 0"}}),Object(r.jsxs)(Qe.a,{style:{padding:"0 24px 24px"},children:[Object(r.jsx)(ct,{width:200,className:"site-layout-background",children:Object(r.jsxs)(et.a,{mode:"inline",defaultSelectedKeys:["1"],style:{height:"100%",borderRight:0},children:[Object(r.jsx)(et.a.Item,{children:Object(r.jsx)(u.c,{exact:!0,to:"/profile",children:"Profile"})},"1"),Object(r.jsx)(et.a.Item,{children:Object(r.jsx)(u.c,{exact:!0,to:"/dialogs",children:"Messages"})},"2"),Object(r.jsx)(et.a.Item,{children:Object(r.jsx)(u.c,{exact:!0,to:"/users",children:"Users"})},"3"),Object(r.jsx)(et.a.Item,{children:Object(r.jsx)(u.c,{exact:!0,to:"/settings",children:"Settings"})},"4")]})}),Object(r.jsxs)(st,{style:{background:"#fff",padding:24,margin:0,minHeight:280},children:[Object(r.jsx)(j.b,{exact:!0,path:"/",render:function(){return Object(r.jsx)(j.a,{to:"/profile"})}}),Object(r.jsx)(j.b,{path:"/login",render:function(){return Object(r.jsx)(Ze,{})}}),Object(r.jsx)(j.b,{path:"/profile/:userId?",render:function(){return Object(r.jsx)(qe,{})}}),Object(r.jsx)(j.b,{path:"/dialogs",render:function(){return Object(r.jsx)(L,{})}}),Object(r.jsx)(j.b,{path:"/users",render:function(){return Object(r.jsx)(_e,{})}}),Object(r.jsx)(j.b,{path:"/settings",render:function(){return Object(r.jsx)(l,{})}})]})]})]})]}):Object(r.jsx)(xe,{})},ot={posts:[{id:1,message:"Hi, how are you?",likesCount:16},{id:2,message:"I'm a programmer",likesCount:56},{id:3,message:"It's my first post",likesCount:3}],profile:null,status:""},ut={dialogs:[{name:"Dimych",id:1},{name:"Andrey",id:2},{name:"Galina",id:3},{name:"Victor",id:4},{name:"Maxim",id:5},{name:"Sveta",id:6}],messages:[{id:1,message:"Hello"},{id:2,message:"Hi"},{id:3,message:"You are right?"},{id:4,message:"Yes, i am!"}]},lt={userId:null,email:null,login:null,isAuth:!1,photo:null,captcha:null},jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(d.a)(Object(d.a)({},e),t.data);case"SET_USER_PHOTO":return Object(d.a)(Object(d.a)({},e),{},{photo:t.photo});case"SET_CAPTCHA":return Object(d.a)(Object(d.a)({},e),{},{captcha:t.captchaUrl});default:return e}},dt=n(179),bt=n(156),mt=Object(h.c)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var n={id:(new Date).getTime(),message:t.newText,likesCount:0};return Object(d.a)(Object(d.a)({},e),{},{posts:[n].concat(Object(K.a)(e.posts))});case"SET_USER_PROFILE":return Object(d.a)(Object(d.a)({},e),{},{profile:t.profile});case"SET_USER_STATUS":return Object(d.a)(Object(d.a)({},e),{},{status:t.status});case"REMOVE_POST":return Object(d.a)(Object(d.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.id}))});case"SET_PHOTO":return Object(d.a)(Object(d.a)({},e),{},{profile:Object(d.a)(Object(d.a)({},e.profile),{},{photos:t.photo})});default:return e}},dialogsPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-MESSAGE":var n={id:(new Date).getTime(),message:t.newText};return Object(d.a)(Object(d.a)({},e),{},{messages:[].concat(Object(K.a)(e.messages),[n])});default:return e}},usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.FOLLOW:return Object(d.a)(Object(d.a)({},e),{},{users:Z(e.users,t.userId,"id",{followed:!0})});case p.UNFOLLOW:return Object(d.a)(Object(d.a)({},e),{},{users:Z(e.users,t.userId,"id",{followed:!1})});case p.SET_USERS:return Object(d.a)(Object(d.a)({},e),{},{users:t.users});case p.SET_CURRENT_PAGE:return Object(d.a)(Object(d.a)({},e),{},{currentPage:t.currentPage});case p.SET_USERS_COUNT:return Object(d.a)(Object(d.a)({},e),{},{totalUsersCount:t.usersCount});case p.SET_IS_FETCHING:return Object(d.a)(Object(d.a)({},e),{},{isFetching:t.isFetching});case p.FOLLOWING_IN_PROGRESS:return Object(d.a)(Object(d.a)({},e),{},{followingInProgress:t.isLoading?[].concat(Object(K.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},auth:jt,form:bt.a,appPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X.SET_INITIALIZED:return Object(d.a)(Object(d.a)({},e),{},{initialized:!0});default:return e}}}),Ot=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||h.d,pt=Object(h.e)(mt,Ot(Object(h.a)(dt.a)));o.a.render(Object(r.jsx)(u.a,{children:Object(r.jsx)(m.a,{store:pt,children:Object(r.jsx)(it,{})})}),document.getElementById("root")),c()},43:function(e,t,n){e.exports={usersBlock:"Users_usersBlock__1quFL",container:"Users_container__2hMdG",user:"Users_user__3SRiF",userIconBlock:"Users_userIconBlock__dnxVc",photo:"Users_photo__DK-5r",userDescriptionBlock:"Users_userDescriptionBlock__2Kw-9",userDescriptionInfo:"Users_userDescriptionInfo__2aXCC",imgLoad:"Users_imgLoad__140tO"}},59:function(e,t,n){e.exports={ava:"ProfileInfo_ava__2m2XW",description:"ProfileInfo_description__1GqWT"}},77:function(e,t,n){e.exports={dialogs:"Dialogs_dialogs__SBqCl",dialogs__items:"Dialogs_dialogs__items__2b9Rw",active:"Dialogs_active__3jVbT",messages:"Dialogs_messages__1e_sA",messages__item:"Dialogs_messages__item__3TGKE",dialog:"Dialogs_dialog__3wV3b",input:"Dialogs_input__3Aw_9",text:"Dialogs_text__1nAwX",butt:"Dialogs_butt__cEDsp"}},78:function(e,t,n){e.exports={form:"Login_form__3nFZO",rememberBlock:"Login_rememberBlock__3rdcN",input:"Login_input__3pt_O",formSummaryError:"Login_formSummaryError__3k_-9"}},88:function(e,t,n){e.exports={paginatorBlock:"paginator_paginatorBlock__1FNaZ",portionBlock:"paginator_portionBlock__eR6I3",pageNumber:"paginator_pageNumber__1fpUu",pageNumberActive:"paginator_pageNumberActive__33D8a"}}},[[347,1,2]]]);
//# sourceMappingURL=main.fbcb994e.chunk.js.map